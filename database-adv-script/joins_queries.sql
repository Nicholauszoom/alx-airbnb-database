-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;

-- 1. INNER JOIN: Get all bookings with the users who made them
SELECT
	BOOKINGS.ID AS BOOKING_ID,
	BOOKINGS.PROPERTY_ID,
	BOOKINGS.START_DATE,
	BOOKINGS.END_DATE,
	BOOKINGS.STATUS,
	BOOKINGS.CREATED_AT,
	USERS.ID AS USER_ID,
	USERS.NAME,
	USERS.EMAIL
FROM
	BOOKINGS
	INNER JOIN USERS ON BOOKINGS.USER_ID = USERS.ID;


-- 2. LEFT JOIN: Get all properties with their reviews (include properties with no reviews)
    SELECT
	PROPERTIES.ID AS PROPERTY_ID,
	PROPERTIES.OWNER_ID,
	PROPERTIES.TITLE,
	PROPERTIES.DESCRIPTION,
	PROPERTIES.LOCATION,
	PROPERTIES.PRICE,
	PROPERTIES.CREATED_AT,
	REVIEWS.ID AS REVIEW_ID,
	REVIEWS.RATING,
	REVIEWS.COMMENT
FROM
	PROPERTIES
	LEFT JOIN REVIEWS ON REVIEWS.PROPERTY_ID = PROPERTY_ID;SELECT
	PROPERTIES.ID AS PROPERTY_ID,
	PROPERTIES.OWNER_ID,
	PROPERTIES.TITLE,
	PROPERTIES.DESCRIPTION,
	PROPERTIES.LOCATION,
	PROPERTIES.PRICE,
	PROPERTIES.CREATED_AT,
	REVIEWS.ID AS REVIEW_ID,
	REVIEWS.RATING,
	REVIEWS.COMMENT
FROM
	PROPERTIES
	LEFT JOIN REVIEWS ON REVIEWS.PROPERTY_ID = PROPERTY_ID;

-- 3. FULL OUTER JOIN: Get all users and all bookings, even if unmatched
-- For PostgreSQL:

    SELECT
	USERS.ID AS USER_ID,
	USERS.NAME,
	USERS.EMAIL,
	USERS.CREATED_AT,
	BOOKINGS.ID AS BOOKING_ID,
	BOOKINGS.START_DATE,
	BOOKINGS.END_DATE
FROM
	USERS
	FULL OUTER JOIN BOOKINGS ON USER_ID = BOOKINGS.USER_ID;

END;